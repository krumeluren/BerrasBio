@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

@using Microsoft.AspNetCore.Identity
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@model BerrasBio.ViewModels.UserLoginModel


<div class="modal fade" tabindex="-1" id="loginModal"
     data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Login</h4>
            </div>
            <div class="modal-body">
                <form id="LoginForm" asp-action="Login" method="post">
                    <div class="form-group">
                        <label asp-for="@Model.Email" class="control-label"></label>
                        <input asp-for="@Model.Email" class="form-control" />
                        <span asp-validation-for="@Model.Email" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="@Model.Password" class="control-label"></label>
                        <input type="password" asp-for="@Model.Password" class="form-control" />
                        <span asp-validation-for="@Model.Password" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <input type="checkbox" asp-for="@Model.RememberMe" class="form-check-input" /> <span>Kom ihåg mig</span>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="submit" id="loginModalSubmit" class="btn btn-primary button button4" onclick="SignIn()">
                    Logga in
                </button>
                <button type="button" id="loginModalClose" class="btn btn-primary button button4">
                    Stäng
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    function SignIn() {
      $.ajax({
        url: "../../User/Login",
        type: "POST",
        data: $("#LoginForm").serialize(),
        success: function (result) {
            location.reload();  
        },
      });
    }
</script>